{"version":3,"sources":["components/Footer.module.scss","components/Header.module.scss","components/Input.module.scss","components/Result.module.scss","components/Main.module.scss","components/App.module.scss","components/Footer.jsx","components/Header.jsx","components/Input.jsx","components/Result.jsx","components/Main.jsx","components/App.jsx","index.jsx"],"names":["module","exports","cx","classNames","bind","styles","Footer","className","href","Header","Input","label","value","type","placeholder","onChange","addons","maxLength","minLength","useState","active","setActive","inputRef","useRef","handleChange","e","Function","onClick","current","focus","ref","onFocus","onBlur","formatTime","seconds","parseInt","toFixed","Result","content","calculationResult","mode","setMode","modeTransition","table","chart","toggleButton","class","width","height","data","strokeDasharray","dataKey","stroke","header","body","map","retryCount","backoffSeconds","accumulateBackoffSeconds","key","getQueryStringValue","url","URL","window","location","URLSearchParams","search","get","Main","minRetryBackoffSeconds","setMinRetryBackoffSeconds","maxRetryBackoffSeconds","setMaxRetryBackoffSeconds","totalRetryCount","setTotalRetryCount","isNaN","parseFloat","minRetryBackoff","maxRetryBackoff","result","Math","min","push","calculateExponentialBackoff","history","replaceState","newUrl","toString","replace","path","target","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fec2e206.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Footer\":\"Footer_Footer__1yZ4j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__3v0KW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"Input_Input__FOf2Q\",\"active\":\"Input_active__uks-4\",\"inner-wrapper\":\"Input_inner-wrapper__2VLTX\",\"addons\":\"Input_addons__PRhpL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Result\":\"Result_Result__1Vkfn\",\"table-wrapper\":\"Result_table-wrapper__2Z9Z3\",\"toggle-button\":\"Result_toggle-button__667xT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main\":\"Main_Main__2l4zb\",\"form-wrapper\":\"Main_form-wrapper__1-p8r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__rq8wc\"};","import React from \"react\";\nimport classNames from \"classnames/bind\";\n\nimport styles from \"./Footer.module.scss\";\nconst cx = classNames.bind(styles);\n\nconst Footer = () => {\n  return (\n    <footer className={cx(\"Footer\")}>\n      <p>\n        Truncated exponential backoff is a standard error handling strategy for\n        network applications in which a client periodically retries a failed\n        request with increasing delays between requests. (Ref:{\" \"}\n        <a href=\"https://cloud.google.com/storage/docs/exponential-backoff\">\n          Google Cloud Documentation\n        </a>\n        )\n      </p>\n      <p>\n        Formula:{\" \"}\n        <code>\n          &#123;current backoff&#125; = min(\n          <br />\n          &nbsp;&nbsp;&#123;min retry backoff&#125; * (2 ** (&#123;retry #&#125;\n          - 1)), <br />\n          &nbsp;&nbsp;&#123;max retry backoff&#125;\n          <br />)\n        </code>\n      </p>\n      <p>\n        Source Code:{\" \"}\n        <a href=\"https://github.com/youngminz/exponential-backoff\">\n          https://github.com/youngminz/exponential-backoff\n        </a>\n      </p>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import React from \"react\";\nimport classNames from \"classnames/bind\";\n\nimport styles from \"./Header.module.scss\";\nconst cx = classNames.bind(styles);\n\nconst Header = () => {\n  return (\n    <header className={cx(\"Header\")}>\n      <h1>truncated exponential backoff simulator</h1>\n    </header>\n  );\n};\n\nexport default Header;\n","import React, { useState, useRef } from \"react\";\nimport classNames from \"classnames/bind\";\n\nimport styles from \"./Input.module.scss\";\nconst cx = classNames.bind(styles);\n\nconst Input = ({\n  label,\n  value,\n  type,\n  placeholder,\n  onChange,\n  addons,\n  maxLength,\n  minLength\n}) => {\n  const [active, setActive] = useState(false);\n  const inputRef = useRef();\n  const handleWrapperClick = () => {\n    setActive(true);\n    inputRef.current.focus();\n  };\n\n  const handleChange = e => {\n    if (onChange && onChange instanceof Function) {\n      onChange(e);\n    }\n  };\n\n  return (\n    <div\n      className={cx(\"Input\", { active })}\n      onClick={() => handleWrapperClick()}\n    >\n      {label && <label>{label}</label>}\n      <div className={cx(\"inner-wrapper\")}>\n        <input\n          ref={inputRef}\n          type={type}\n          value={value}\n          placeholder={placeholder}\n          maxLength={maxLength}\n          minLength={minLength}\n          onChange={e => handleChange(e)}\n          onFocus={() => setActive(true)}\n          onBlur={() => setActive(false)}\n        />\n        {addons && <div className={cx(\"addons\")}>{addons}</div>}\n      </div>\n    </div>\n  );\n};\n\nexport default Input;\n","import React, { useState } from \"react\";\nimport classNames from \"classnames/bind\";\nimport {\n  LineChart,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n  Legend,\n  Line,\n  ResponsiveContainer\n} from \"recharts\";\n\nimport styles from \"./Result.module.scss\";\nconst cx = classNames.bind(styles);\n\nconst formatTime = seconds => {\n  if (seconds >= 60) {\n    return `${parseInt(seconds / 60)} min ${parseInt(seconds % 60)} sec`;\n  } else if (seconds >= 10) {\n    return `${parseInt(seconds % 60)} sec`;\n  }\n  return `${(seconds % 60).toFixed(2)} sec`;\n};\n\nconst Result = ({ calculationResult }) => {\n  const [mode, setMode] = useState(\"chart\");\n  const modeTransition = {\n    table: \"chart\",\n    chart: \"table\"\n  };\n\n  const toggleButton = (\n    <div class={cx(\"toggle-button\")}>\n      <button\n        onClick={() => {\n          setMode(modeTransition[mode]);\n        }}\n      >\n        Toggle to {modeTransition[mode]} view\n      </button>\n    </div>\n  );\n\n  let content;\n\n  if (mode === \"chart\") {\n    content = (\n      <ResponsiveContainer width=\"100%\" height={400}>\n        <LineChart data={calculationResult}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"retryCount\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Line type=\"monotone\" dataKey=\"backoffSeconds\" stroke=\"#8884d8\" />\n          <Line\n            type=\"monotone\"\n            dataKey=\"accumulateBackoffSeconds\"\n            stroke=\"#82ca9d\"\n          />\n        </LineChart>\n      </ResponsiveContainer>\n    );\n  } else {\n    const header = (\n      <tr>\n        <th>retry #</th>\n        <th>current backoff</th>\n        <th>accumulated backoff</th>\n      </tr>\n    );\n    const body = calculationResult.map(\n      ({ retryCount, backoffSeconds, accumulateBackoffSeconds }) => {\n        return (\n          <tr key={retryCount}>\n            <td>{retryCount}</td>\n            <td>{formatTime(backoffSeconds)}</td>\n            <td>{formatTime(accumulateBackoffSeconds)}</td>\n          </tr>\n        );\n      }\n    );\n\n    content = (\n      <div className={cx(\"table-wrapper\")}>\n        <table>\n          <thead>{header}</thead>\n          <tbody>{body}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cx(\"Result\")}>\n      {toggleButton}\n      {content}\n    </div>\n  );\n};\n\nexport default Result;\n","import React, { useState } from \"react\";\nimport classNames from \"classnames/bind\";\n\nimport Input from \"./Input\";\nimport Result from \"./Result\";\n\nimport styles from \"./Main.module.scss\";\nconst cx = classNames.bind(styles);\n\nconst calculateExponentialBackoff = (\n  minRetryBackoff,\n  maxRetryBackoff,\n  totalRetryCount\n) => {\n  let result = [];\n  let accumulateBackoffSeconds = 0.0;\n\n  for (let retryCount = 1; retryCount <= totalRetryCount; retryCount++) {\n    const backoffSeconds = Math.min(\n      minRetryBackoff * 2 ** (retryCount - 1),\n      maxRetryBackoff\n    );\n    accumulateBackoffSeconds += backoffSeconds;\n\n    result.push({\n      retryCount,\n      backoffSeconds,\n      accumulateBackoffSeconds\n    });\n  }\n\n  return result;\n};\n\nconst getQueryStringValue = key => {\n  const url = new URL(window.location);\n  const params = new URLSearchParams(url.search);\n  return params.get(key);\n};\n\nconst Main = () => {\n  const [minRetryBackoffSeconds, setMinRetryBackoffSeconds] = useState(\n    getQueryStringValue(\"min\") || 0.1\n  );\n  const [maxRetryBackoffSeconds, setMaxRetryBackoffSeconds] = useState(\n    getQueryStringValue(\"max\") || 60.0\n  );\n  const [totalRetryCount, setTotalRetryCount] = useState(\n    getQueryStringValue(\"retry\") || 15\n  );\n\n  let calculationResult = null;\n\n  if (\n    isNaN(parseFloat(minRetryBackoffSeconds)) ||\n    isNaN(parseFloat(maxRetryBackoffSeconds)) ||\n    isNaN(parseInt(totalRetryCount))\n  ) {\n    calculationResult = [];\n  } else {\n    calculationResult = calculateExponentialBackoff(\n      parseFloat(minRetryBackoffSeconds),\n      parseFloat(maxRetryBackoffSeconds),\n      parseInt(totalRetryCount)\n    );\n\n    if (window.history.replaceState) {\n      const newUrl =\n        window.location.toString().replace(window.location.search, \"\") +\n        `?min=${minRetryBackoffSeconds}&max=${maxRetryBackoffSeconds}&retry=${totalRetryCount}`;\n\n      window.history.replaceState({ path: newUrl }, \"\", newUrl);\n    }\n  }\n\n  return (\n    <main className={cx(\"Main\")}>\n      <div className={cx(\"form-wrapper\")}>\n        <Input\n          type=\"number\"\n          label=\"min retry backoff\"\n          value={minRetryBackoffSeconds}\n          onChange={e => setMinRetryBackoffSeconds(e.target.value)}\n          addons=\"sec\"\n        />\n        <Input\n          type=\"number\"\n          label=\"max retry backoff\"\n          value={maxRetryBackoffSeconds}\n          onChange={e => setMaxRetryBackoffSeconds(e.target.value)}\n          addons=\"sec\"\n        />\n        <Input\n          type=\"number\"\n          label=\"total retry count\"\n          value={totalRetryCount}\n          onChange={e => setTotalRetryCount(e.target.value)}\n          maxLength=\"3\"\n          addons=\"retry\"\n        />\n      </div>\n\n      <Result calculationResult={calculationResult} />\n    </main>\n  );\n};\n\nexport default Main;\n","import React from \"react\";\nimport classNames from \"classnames/bind\";\n\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\n\nimport styles from \"./App.module.scss\";\nconst cx = classNames.bind(styles);\n\nconst App = () => {\n  return (\n    <div className={cx(\"App\")}>\n      <Header />\n      <Main />\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./components/App\";\n\nimport \"normalize-css\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}